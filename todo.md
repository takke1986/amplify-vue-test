# 回覧箋アプリ MVP 機能要件

## 🔴 認証・認可

- [x] Microsoft Entra ID によるユーザー認証
  - [x] 部署情報の取得
  - [x] ユーザー名の表示
  - [x] ログイン/ログアウト機能

## 🔴 回覧箋基本機能

- [ ] 回覧箋の作成

  - タイトル
  - 本文
  - 添付ファイル
  - 期限設定
  - 回覧先の選択（部署単位）

- [ ] 回覧箋の一覧表示

  - 作成した回覧箋
  - 回覧中の回覧箋
  - 完了した回覧箋
  - フィルタリング機能

- [ ] 回覧箋の詳細表示

  - 基本情報の表示
  - 回覧状況の確認
  - コメント機能

- [ ] 回覧箋の承認/否認
  - 承認ボタン
  - 否認ボタン
  - コメント入力

## 🟡 通知機能

- [ ] 新規回覧箋の通知
- [ ] 承認待ちの通知
- [ ] 期限切れの通知

## 🟡 検索機能

- [ ] キーワード検索
- [ ] フィルタリング
  - ステータス
  - 期間
  - 部署

## 🟢 その他機能

- [ ] ダッシュボード
  - 未処理の回覧箋数
  - 期限切れの回覧箋数
  - 最近の活動

## ⚪ 将来的な拡張機能

- [ ] テンプレート機能
- [ ] 一括承認機能
- [ ] エクスポート機能
- [ ] 統計機能

## 技術要件

- [x] Vue.js + TypeScript
- [x] AWS Amplify
- [x] Microsoft Entra ID 連携
- [ ] レスポンシブデザイン
- [ ] アクセシビリティ対応

## 実装方針

### 1. データモデルの設計

- 回覧箋（Circular）

  - ID
  - タイトル
  - 本文
  - 作成者（ユーザー ID）
  - 作成日時
  - 期限
  - ステータス（作成中、回覧中、完了、期限切れ）
  - 添付ファイル情報

- 回覧状況（CircularStatus）
  - 回覧箋 ID
  - 部署 ID
  - ステータス（未読、承認待ち、承認済み、否認）
  - コメント
  - 更新日時

### 2. 実装順序

1. 回覧箋作成機能

   - 基本フォームの実装
   - 添付ファイルアップロード
   - 回覧先選択（部署単位）

2. 回覧箋一覧表示

   - テーブル形式での表示
   - フィルタリング機能
   - ページネーション

3. 回覧箋詳細表示

   - 基本情報表示
   - 回覧状況の表示
   - コメント機能

4. 承認/否認機能

   - 承認/否認ボタン
   - コメント入力
   - ステータス更新

5. 通知機能
   - 新規回覧箋通知
   - 承認待ち通知
   - 期限切れ通知

### 3. 技術的な考慮点

- AWS Amplify の GraphQL API を使用
- ファイルストレージは S3 を使用
- リアルタイム更新は AppSync のサブスクリプションを活用
- 通知は SNS/SQS を使用

### 4. セキュリティ考慮事項

- 部署単位でのアクセス制御
- ファイルアップロードの制限
- 入力値のバリデーション
- XSS 対策
