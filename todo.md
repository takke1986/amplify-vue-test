# 回覧箋アプリ MVP 機能要件

## 🔴 認証・認可

- [x] Microsoft Entra ID によるユーザー認証
  - [x] 部署情報の取得
  - [x] ユーザー名の表示
  - [x] ログイン/ログアウト機能

## 🔴 回覧箋基本機能

- [x] 回覧箋の作成

  - タイトル
  - 本文
  - 添付ファイル
  - 期限設定
  - 回覧先の選択（部署単位・ラジオボタン）
  - バリデーション・UI/UX

- [x] 回覧箋の一覧表示

  - 作成した回覧箋
  - 回覧中の回覧箋
  - 完了した回覧箋
  - フィルタリング機能
  - ページネーション
  - 回覧先の部署名表示
  - キーワード検索

- [x] 回覧箋の詳細表示

  - 基本情報の表示
  - 本文リッチ表示
  - 回覧状況の表示
  - コメント機能

- [ ] 認可設定画面の作成
  - 部署・ロールごとの権限設定 UI

## 🟡 通知機能

- [ ] 新規回覧箋の通知
- [ ] 承認待ちの通知
- [ ] 期限切れの通知

## 🟡 検索機能

- [x] キーワード検索
- [x] フィルタリング
  - ステータス
  - 期間
  - 部署

## 🟢 その他機能

- [x] ダッシュボード（ホーム画面で実装済み）
  - 未処理の回覧箋数
  - 期限切れの回覧箋数
  - 最近の活動

## ⚪ 将来的な拡張機能

- [ ] テンプレート機能
- [ ] 一括承認機能
- [ ] エクスポート機能
- [ ] 統計機能

## 技術要件

- [x] Vue.js + TypeScript
- [x] AWS Amplify
- [x] Microsoft Entra ID 連携
- [ ] レスポンシブデザイン
- [ ] アクセシビリティ対応

## 今後のおすすめ実装順・提案

1. 認可設定画面の作成
   - 部署・ロールごとの権限設定 UI
2. 通知機能
   - 新規回覧・承認待ち・期限切れ等の通知（UI/メール/バッジ等）
   - SNS/SQS 等の AWS サービス連携
3. アクセシビリティ・レスポンシブ最終調整
   - モバイル対応、キーボード操作、色覚対応
4. Tiptap エディタへの移行検討・実装
   - 画像・表・埋め込み等のリッチ機能拡張

## 実装方針

### 1. データモデルの設計

- 回覧箋（Circular）

  - ID
  - タイトル
  - 本文
  - 作成者（ユーザー ID）
  - 作成日時
  - 期限
  - ステータス（作成中、回覧中、完了、期限切れ）
  - 添付ファイル情報
  - 回覧先（部署・ユーザー）

- 回覧状況（CircularStatus）
  - 回覧箋 ID
  - 部署 ID
  - ステータス（未読、承認待ち、承認済み、否認）
  - コメント
  - 更新日時

### 2. 技術的な考慮点

- AWS Amplify の GraphQL API を使用
- ファイルストレージは S3 を使用
- リアルタイム更新は AppSync のサブスクリプションを活用
- 通知は SNS/SQS を使用

### 3. セキュリティ考慮事項

- 部署単位でのアクセス制御
- ファイルアップロードの制限
- 入力値のバリデーション
- XSS 対策

## ⚪ 設定画面の作成

- [ ] 認可設定（部署ごとに「編集権限」「管理者権限」のみ設定可能）
- [ ] ロールは「一般」と「管理者」のみ
- [ ] 部署・所属の設定は管理者のみ編集可
- [ ] 通知先メールアドレスは認可を受けている部署のみ編集可
- [ ] 通知先メールアドレスは複数登録可（カンマ区切り等）
- [ ] 所属部署の表示・変更
- [ ] 通知先メールアドレスの設定・変更
