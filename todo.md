# 回覧箋アプリ MVP 機能要件

## 🔴 認証・認可

- [x] Microsoft Entra ID によるユーザー認証
  - [x] 部署情報の取得
  - [x] ユーザー名の表示
  - [x] ログイン/ログアウト機能

## 🔴 回覧箋基本機能

- [x] 回覧箋の作成

  - タイトル
  - 本文
  - 添付ファイル
  - 期限設定
  - 回覧先の選択（部署単位・ラジオボタン）
  - バリデーション・UI/UX

- [x] 回覧箋の一覧表示

  - 作成した回覧箋
  - 回覧中の回覧箋
  - 完了した回覧箋
  - フィルタリング機能
  - ページネーション
  - 回覧先の部署名表示
  - キーワード検索

- [ ] 回覧箋の詳細表示

  - 基本情報の表示
  - 本文リッチ表示
  - 回覧状況の表示
  - コメント機能

- [ ] 回覧箋の承認/否認
  - 承認ボタン
  - 否認ボタン
  - コメント入力

## 🟡 通知機能

- [ ] 新規回覧箋の通知
- [ ] 承認待ちの通知
- [ ] 期限切れの通知

## 🟡 検索機能

- [x] キーワード検索
- [x] フィルタリング
  - ステータス
  - 期間
  - 部署

## 🟢 その他機能

- [ ] ダッシュボード
  - 未処理の回覧箋数
  - 期限切れの回覧箋数
  - 最近の活動

## ⚪ 将来的な拡張機能

- [ ] テンプレート機能
- [ ] 一括承認機能
- [ ] エクスポート機能
- [ ] 統計機能

## 技術要件

- [x] Vue.js + TypeScript
- [x] AWS Amplify
- [x] Microsoft Entra ID 連携
- [ ] レスポンシブデザイン
- [ ] アクセシビリティ対応

## 今後のおすすめ実装順

1. 回覧箋の詳細表示の強化
   - 本文リッチ表示
   - 回覧状況の UI 強化
   - コメント機能のバリデーション
2. 承認/否認機能
   - 承認・否認ボタンの動作
   - コメント送信時の API 連携
3. 通知機能
4. ダッシュボード
5. アクセシビリティ・レスポンシブ最終調整
6. Tiptap エディタへの移行検討・実装
   - よりリッチで拡張性の高いエディタ導入のため
   - 画像・表・埋め込み等の機能も検証

## 実装方針

### 1. データモデルの設計

- 回覧箋（Circular）

  - ID
  - タイトル
  - 本文
  - 作成者（ユーザー ID）
  - 作成日時
  - 期限
  - ステータス（作成中、回覧中、完了、期限切れ）
  - 添付ファイル情報
  - 回覧先（部署・ユーザー）

- 回覧状況（CircularStatus）
  - 回覧箋 ID
  - 部署 ID
  - ステータス（未読、承認待ち、承認済み、否認）
  - コメント
  - 更新日時

### 2. 技術的な考慮点

- AWS Amplify の GraphQL API を使用
- ファイルストレージは S3 を使用
- リアルタイム更新は AppSync のサブスクリプションを活用
- 通知は SNS/SQS を使用

### 3. セキュリティ考慮事項

- 部署単位でのアクセス制御
- ファイルアップロードの制限
- 入力値のバリデーション
- XSS 対策
